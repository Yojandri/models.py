{% extends '#base_layer.html' %}
{% block title %}个人中心-修改信息{% endblock title %}
{% block staticfiles %}
    <script type="text/javascript" src="../static/lib/jquery.validation/1.14.0/jquery.validate.js"></script>
    <script type="text/javascript" src="../static/lib/jquery.validation/1.14.0/validate-methods.js"></script>
    <script type="text/javascript" src="../static/lib/jquery.validation/1.14.0/messages_zh.js"></script>
{% endblock staticfiles %}
{% block body %}
<article class="cl pd-20">
	<form action="" method="post" class="form form-horizontal" id="form-changeInfo">
        {% csrf_token %}
        {% if message %}
                <div class="row cl message">{{ message }}</div>
        {% endif %}
        <!--学院选择-->
		<div class="row cl">
			<label class="form-label col-xs-4 col-sm-3">学院：</label>
			<div class="formControls col-xs-8 col-sm-9"><span class="select-box" style="width:150px">
                <select class="select" name="renew_stucollege" size="1">
                    <option value='' disabled selected style='display:none;'>{{ person.stu_college }}</option>
                    <option id="renew_stucollege" value="经济学院">经济学院</option>
                    <option id="renew_stucollege" value="法学院">法学院</option>
                    <option id="renew_stucollege" value="文学与新闻学院（新闻学院）">文学与新闻学院（新闻学院）</option>
                    <option id="renew_stucollege" value="外国语学院">外国语学院</option>
                    <option id="renew_stucollege" value="艺术学院">艺术学院</option>
                    <option id="renew_stucollege" value="历史文化学院(旅游学院)">历史文化学院(旅游学院)</option>
                    <option id="renew_stucollege" value="数学学院">数学学院</option>
                    <option id="renew_stucollege" value="物理学院">物理学院</option>
                    <option id="renew_stucollege" value="化学学院">化学学院</option>
                    <option id="renew_stucollege" value="生命科学学院">生命科学学院</option>
                    <option id="renew_stucollege" value="电子信息学院">电子信息学院</option>
                    <option id="renew_stucollege" value="材料科学与工程学院">材料科学与工程学院</option>
                    <option id="renew_stucollege" value="机械工程学院">机械工程学院</option>
                    <option id="renew_stucollege" value="电气工程学院">电气工程学院</option>
                    <option id="renew_stucollege" value="计算机学院（软件学院）">计算机学院（软件学院）</option>
                    <option id="renew_stucollege" value="建筑与环境学院">建筑与环境学院</option>
                    <option id="renew_stucollege" value="水利水电学院">水利水电学院</option>
                    <option id="renew_stucollege" value="化学工程学院">化学工程学院</option>
                    <option id="renew_stucollege" value="轻工科学与工程学院">轻工科学与工程学院</option>
                    <option id="renew_stucollege" value="高分子科学与工程学院">高分子科学与工程学院</option>
                    <option id="renew_stucollege" value="华西基础医学与法医学院	">华西基础医学与法医学院</option>
                    <option id="renew_stucollege" value="华西临床医学院(华西医院)">华西临床医学院(华西医院)	</option>
                    <option id="renew_stucollege" value="华西第二医院">华西第二医院</option>
                    <option id="renew_stucollege" value="华西口腔医学院（华西口腔医院）">华西口腔医学院（华西口腔医院）</option>
                    <option id="renew_stucollege" value="华西公共卫生学院(华西第四医院)">华西公共卫生学院(华西第四医院)</option>
                    <option id="renew_stucollege" value="华西药学院">华西药学院</option>
                    <option id="renew_stucollege" value="公共管理学院">公共管理学院</option>
                    <option id="renew_stucollege" value="商学院">商学院</option>
                    <option id="renew_stucollege" value="马克思主义学院">马克思主义学院</option>
                    <option id="renew_stucollege" value="体育学院">体育学院</option>
                    <option id="renew_stucollege" value="灾后重建与管理学院">灾后重建与管理学院</option>
                    <option id="renew_stucollege" value="空天科学与工程学院">空天科学与工程学院</option>
                    <option id="renew_stucollege" value="匹兹堡学院">匹兹堡学院</option>
                    <option id="renew_stucollege" value="国际关系学院">国际关系学院</option>
                    <option id="renew_stucollege" value="网络空间安全学院">网络空间安全学院</option>
                    <option id="renew_stucollege" value="海外教育学院">海外教育学院</option>
                    <option id="renew_stucollege" value="哲学系">哲学系</option>
                    <option id="renew_stucollege" value="生物医学工程学院">生物医学工程学院</option>
                </select>
            </span>

			</div>
		</div>
        <!--专业选择-->
		<div class="row cl">
			<label class="form-label col-xs-4 col-sm-3">专业：</label>
			<div class="formControls col-xs-8 col-sm-9"> <span class="select-box" style="width:150px;">
				<select class="select" name="renew_stumajor" size="1">
                    <option id='renew_stumajor' value='' disabled selected style='display:none;'>{{ person.stu_major }}</option>
					<option id='renew_stumajor' value="信息管理与信息系统">信息管理与信息系统</option>
					<option id='renew_stumajor' value="行政管理">行政管理</option>
					<option id='renew_stumajor' value="土地管理">土地管理</option>
					<option id='renew_stumajor' value="劳动与社会劳动保障">劳动与社会保障</option>
					<option id='renew_stumajor' value="社会工作">社会工作</option>
					<option id='renew_stumajor' value="档案学">档案学</option>
					<option id='renew_stumajor' value="信息资源管理">信息资源管理</option>
                    <option id='renew_stumajor' value="公共管理大类">公共管理大类</option>
                    <option id='renew_stumajor' value="其他">其他</option><!--这里还存在其他学院其他专业的情况-->
				</select>
				</span> </div>
		</div>
        <!--班级-->
        <div class="row cl">
			<label class="form-label col-xs-4 col-sm-3"><span class="c-red"></span>班级：</label>
			<div class="formControls col-xs-8 col-sm-9">
				<input type="text" class="input-text" autocomplete="off"  value="{{ person.stu_class }}" id="renew_stuclass" name="renew_stuclass">
			</div>
		</div>
        <!--电话-->
        <div class="row cl">
			<label class="form-label col-xs-4 col-sm-3"><span class="c-red"></span>电话：</label>
			<div class="formControls col-xs-8 col-sm-9">
                <input type="text" class="input-text" autocomplete="off"  value="{{ person.stu_phone }}" id="renew_stuphone" name="renew_stuphone">
            </div>
		</div>
        <!--QQ-->
        <div class="row cl">
			<label class="form-label col-xs-4 col-sm-3"><span class="c-red"></span>QQ：</label>
			<div class="formControls col-xs-8 col-sm-9">
				<input type="text" class="input-text" value="{{ person.stu_qq }}" id="renew_stuqq" name="renew_stuqq">
			</div>
		</div>
        <!--邮箱-->
        <div class="row cl">
			<label class="form-label col-xs-4 col-sm-3"><span class="c-red"></span>邮箱：</label>
			<div class="formControls col-xs-8 col-sm-9">
				<input type="email" class="input-text" value="{{ person.stu_email }}" id="renew_stuemail" name="renew_stuemail">
            </div>
		</div>
		<div class="row cl">
			<div class="col-xs-8 col-sm-9 col-xs-offset-4 col-sm-offset-3">
				<input class="btn btn-primary radius" type="submit" value="&nbsp;&nbsp;确定&nbsp;&nbsp;">
			</div>
		</div>
	</form>
</article>
{% endblock body %}
{% block yewu_js %}
$(function(){
    $('.skin-minimal input').iCheck({
		checkboxClass: 'icheckbox-red',
		radioClass: 'iradio-red',
		increaseArea: '20%'
	});

	$("#form-changeInfo").validate({
		rules:{
			renew_stucollege:{
				required:false,
			},
			renew_stumajor:{
				required:false,
			},
			renew_stuclass:{
				required:false,
                isDigits:true,
			},
            renew_stuphone:{
                required:false,
                isMobile:true,
            },
            renew_stuqq:{
                required:false,
                isQq:true,
            },
            renew_stuemail:{
                required:false,
                email:true,
            },
		},
		onkeyup:false,
		focusCleanup:true,
		success:"valid",
		submitHandler:function(form){
			$(form).ajaxSubmit();
			var index = parent.layer.getFrameIndex(window.name);
			parent.$('.btn-refresh').click();
            parent.location.reload();
			parent.layer.close(index);
		}
	});
});
{% endblock yewu_js %}
